#!/bin/sh

set -e

BUN_VERSION="1.1.18"

echo "-----> Installing Bun $BUN_VERSION"

curl -fsSL https://bun.sh/install | bash -s -- bun-v$BUN_VERSION

# Ensure the installation path is correct
export BUN_INSTALL="$HOME/.bun"
export PATH=$BUN_INSTALL/bin:$PATH

# Create the profile.d directory if it doesn't exist
mkdir -p $HOME/.profile.d

# Write the PATH to profile scripts
echo 'export BUN_INSTALL="$HOME/.bun"' > $HOME/.profile.d/bun.sh
echo 'export PATH=$BUN_INSTALL/bin:$PATH' >> $HOME/.profile.d/bun.sh

# Ensure the profile script is executable
chmod +x $HOME/.profile.d/bun.sh

echo "PATH after installation: $PATH"
